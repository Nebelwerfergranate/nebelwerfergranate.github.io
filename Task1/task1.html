<!DOCTYPE html>
<html lang="ru">
	<head>
		<meta charset="utf-8" />
		<title>Заголовок</title>
		
		<!-- подключаем mocha -->
	    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/mocha/2.1.0/mocha.css">
	    <link rel="stylesheet" href="style.css">
	 	<script src="https://cdnjs.cloudflare.com/ajax/libs/mocha/2.1.0/mocha.js"></script>
		<script>
			mocha.setup('bdd'); // настраиваем Mocha на BDD-тестирование
	 	</script>
	
	  	<!-- подключаем chai -->
	  	<script src="https://cdnjs.cloudflare.com/ajax/libs/chai/3.5.0/chai.js"></script>
	  	<script>
	    	var assert = chai.assert; // выносим assert в глобальную область
	  	</script>
	  	
	  	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
	</head>
	<body>
		<div class="container">
			<div id="inputPanel">
				<input id="inputField" type="number" min="-999" max="999" step="1" required/>
				<button id="addNumberBtn">Добавить число</button>
				<button id="startBtn">Начать сортировку</button>
			</div>
			<div id="screen"></div>
			<div id="sortPanel" class="hidden">
				<button id="nextStepBtn">Следующий шаг</button>
				<button id="resetBtn">Сброс</button>
			</div>
			
			<div class="clear"></div>
			<!-- в элементе с id="mocha" будут результаты тестов -->
  			<div id="mocha"></div>
		</div>
		
		
		<!-- Скрипты -->
		<script type="text/javascript" src="sorter.js"></script>
		
  		<script src="test.js"></script>
  		<script>
  			mocha.run();
  		</script>
		
		<script>
			$().ready(function(){
	            var data = [];

	           	var sorter = null;
	            
	            $("#addNumberBtn").on("click", function() {
	            	var input = document.getElementById("inputField");
	            	if(!input.checkValidity()){
	            		return;
	            	}
	               	data.push(input.value);
	                input.value = "";
	                render(data);
	            })
	            
	            $("#startBtn").on("click", function() {
	                $("#inputPanel").addClass("hidden");
	                $("#sortPanel").removeClass("hidden");
	                sorter = new Sorter(data);
	            });
	            
	            
	            $("#nextStepBtn").on("click", function(){
	            	sorter.nextStep();
	            	
	            	render(sorter.data);
		           	
		           	if(sorter.isChanged){
		           		$("#screen p").eq(sorter.position).addClass("red");
		            	$("#screen p").eq(sorter.position + 1).addClass("red");
		           	} else{
		           		$("#screen p").eq(sorter.position).addClass("yellow");
		            	$("#screen p").eq(sorter.position + 1).addClass("yellow");	
		           	}
	            });
	            
	            
	            
	            function render(data){
	            	$("#screen").html("");
	            	for(var i = 0; i < data.length; i++){
		           		$("#screen").append( "<p>" + data[i] + "</p>" );
		           	}
	            }
            
                //function getRandomInt(min, max) {
	        	//	return Math.floor(Math.random() * (max - min)) + min;
	    		//}
            });
		</script>
	</body>
</html>